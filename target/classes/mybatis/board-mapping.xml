<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
 PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
 "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="mybatis.boardMapper">
	<insert id="boardWrite" parameterType="boardDTO">
 		insert into board2 values
		(board_num.nextval, #{board_id}, #{board_pass}, #{board_subject}, #{board_content},
 		board_num.currval, 0, 0, 0, sysdate)
	</insert>
	
	<delete id="boardDelete" parameterType="int">
		delete board2 where board_num=#{board_num}
	</delete>
	
	<select id="boardView" parameterType="int" resultType="boardDTO">
		select * from board2 where board_num=#{board_num}
	</select>
	
	<select id="boardList" parameterType="java.util.Map" resultType="boardDTO">
		<![CDATA[select board_num, board_id, board_pass, board_subject, board_content,
		board_readcount, to_char(logtime, 'yyyy-mm-dd') as logtime from
		(select rownum rn, tt.* from (select * from board2 order by board_num desc) tt)
		where rn>=#{startNum} and rn<=#{endNum}]]>
	</select>
	
	<select id="getTotal" resultType="int">
		select count(*) as cnt from board2
	</select>
	
	<select id="updateHit" parameterType="int">
		update board2 set board_readcount= board_readcount + 1 where board_num=#{board_num}
	</select>
	
	<select id="boardModify" parameterType="boardDTO">
		update board2 set board_subject=#{board_subject}, board_content=#{board_content}
		where board_num=#{board_num} and board_pass=#{board_pass}
	</select>
	
	<select id="boardReply" parameterType="int">
		update board2 set board_re_seq=#{board_re_seq}+1 where board_re_ref=#{board_re_ref} and board_re_seq>#{board_re_seq}
		
		insert into board2 values
		(board_num.nextval, #{board_id}, #{board_pass}, #{board_subject}, #{board_content},
		board_num.currval, 0, 0, 0, sysdate);
	</select>
	
	<select id="isArticleBoardWriter" resultType="int">
		select * from board2 where board_id=#{board_id}
	</select>
</mapper>



